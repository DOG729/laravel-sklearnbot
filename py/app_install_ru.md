# Инструкция по подготовке для работы скрипта

Эта инструкция поможет вам подготовить окружение и установить необходимые зависимости для запуска Flask-приложения, использующего модель машинного обучения.

### Проверено на Python 3.10.12

## Шаг 1: Создание и активация виртуального окружения

Рекомендуется создать и использовать виртуальное окружение для изоляции зависимостей проекта. Выполните следующие команды:

```
python -m venv venv
```

## Шаг 2: Установка необходимых пакетов

Создайте файл `requirements.txt` и добавьте в него следующие строки:

```
Flask==3.0.3
scikit-learn==1.5.1
```

Для установки всех зависимостей из `requirements.txt` выполните следующую команду:

```
pip install -r requirements.txt
```

## Шаг 3: Подготовка данных и моделей

1. **Создайте файл `data.json`**: Это должен быть JSON-файл с данными, которые вы будете использовать для обучения модели. Формат данных должен соответствовать ожидаемым полям: `title`, `description`, `id`, и опционально `synonym`, `type`, `action`, `belongs_to`.

2. **Обучение модели**:
   - Запустите Flask-приложение и отправьте POST-запрос на `/create-model` для создания и обучения модели на основе данных из `data.json`.

## Шаг 4: Запуск Flask-приложения

Для запуска Flask-приложения используйте команду:

```
python <имя_вашего_файла>.py
```

Замените `<имя_вашего_файла>` на имя Python-файла, содержащего код Flask-приложения (например, `app.py`).

## Шаг 5: Примеры тестирования с помощью `curl`

После запуска приложения вы можете использовать `curl` для тестирования API. Вот несколько примеров:

1. **Создание модели**:

```
curl -X POST http://127.0.0.1:5729/create-model -H "Content-Type: application/json" -H "Authorization: your-secure-token"
```

2. **Перезагрузка модели**:

```
curl -X POST http://127.0.0.1:5729/reload-model -H "Content-Type: application/json" -H "Authorization: your-secure-token"
```

3. **Тонкая настройка модели**:

```
curl -X POST http://127.0.0.1:5729/fine-tune-model -H "Content-Type: application/json" -H "Authorization: your-secure-token" -d '[{"id":"3","title":"boba","text":"aboba"}]'
```

4. **Получение ответа на запрос**:

```
curl -X POST http://127.0.0.1:5729/get-response -H "Content-Type: application/json" -d '{"text":"boba"}'
```